<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mundial 2022 - Torneo Completo</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap');
  body {
    margin: 0; padding: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #004d40, #1de9b6);
    color: #f0f0f0;
    display: flex; flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  h1 {
    margin: 15px 0 5px;
    font-size: 2.5rem;
    text-shadow: 0 2px 5px rgba(0,0,0,0.4);
    user-select: none;
  }
  #info-partido {
    margin: 10px 0 20px;
    font-size: 1.3rem;
    font-weight: 700;
    min-height: 2rem;
    user-select: none;
    text-align: center;
    max-width: 90vw;
  }
  #game-area {
    position: relative;
    width: 360px;
    height: 240px;
    background: linear-gradient(to top, #0b6a0b 50%, #3f8c3f 50%);
    border: 3px solid #1de9b6;
    border-radius: 15px;
    box-shadow: 0 0 15px #1de9b6aa;
    user-select: none;
  }
  #porteria {
    position: absolute;
    bottom: 0; left: 50%;
    transform: translateX(-50%);
    width: 300px;
    height: 120px;
    border: 4px solid #f0f0f0;
    border-radius: 10px 10px 0 0;
    background: #004d40;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
  }
  .zona-tiro {
    border: 1px solid #00795d;
    cursor: pointer;
    transition: background-color 0.3s ease;
    position: relative;
  }
  .zona-tiro:hover {
    background-color: rgba(29, 233, 182, 0.4);
  }
  #balon {
    position: absolute;
    width: 32px; height: 32px;
    border-radius: 50%;
    background: radial-gradient(circle at center, #fff 40%, #000 90%);
    border: 2px solid black;
    box-shadow: 0 0 5px #000;
    pointer-events: none;
    transition: all 0.5s ease;
    z-index: 10;
  }
  #jugador {
    position: absolute;
    bottom: 10px; left: 20px;
    width: 40px; height: 70px;
    border-radius: 15px 15px 5px 5px;
    box-shadow: inset 0 -10px 0 0 #222;
    user-select: none;
  }
  #portero {
    position: absolute;
    bottom: 10px; right: 20px;
    width: 40px; height: 70px;
    border-radius: 15px 15px 5px 5px;
    box-shadow: inset 0 -10px 0 0 #222;
    transition: transform 0.5s ease;
    user-select: none;
  }
  #resultado {
    margin-top: 15px;
    font-size: 1.4rem;
    font-weight: 700;
    height: 28px;
    min-height: 28px;
    user-select: none;
    text-align: center;
    max-width: 90vw;
  }
  #tabla-grupo {
    margin-top: 30px;
    width: 360px;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 10px 15px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    user-select: none;
    overflow-x: auto;
  }
  #tabla-grupo table {
    width: 100%;
    border-collapse: collapse;
    color: #f0f0f0;
  }
  #tabla-grupo th, #tabla-grupo td {
    padding: 8px 5px;
    border-bottom: 1px solid #1de9b6;
    text-align: left;
    font-weight: 600;
    white-space: nowrap;
  }
  #tabla-grupo th {
    font-size: 1rem;
  }
  .flag-small {
    width: 24px; height: 16px;
    margin-right: 6px;
    vertical-align: middle;
    border-radius: 3px;
    box-shadow: 0 0 3px rgba(0,0,0,0.3);
  }
  button#next-partido {
    margin-top: 20px;
    padding: 12px 30px;
    font-size: 1.2rem;
    font-weight: 700;
    border-radius: 12px;
    border: none;
    background: #1de9b6;
    color: #004d40;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: background-color 0.3s ease;
    user-select: none;
    max-width: 90vw;
  }
  button#next-partido:disabled {
    background: #004d40;
    color: #1de9b6;
    cursor: default;
    box-shadow: none;
  }
  button#next-partido:hover:not(:disabled) {
    background: #00bfa5;
  }
  #pantalla-titulo {
    margin-top: 40px;
    font-size: 2rem;
    font-weight: 900;
    color: #ffea00;
    text-shadow: 2px 2px 10px #000;
    user-select: none;
    max-width: 90vw;
    text-align: center;
  }
  /* Responsive */
  @media (max-width: 400px) {
    #game-area, #tabla-grupo {
      width: 90vw;
    }
    #jugador, #portero {
      width: 30px; height: 50px;
    }
  }
</style>
</head>
<body>

<h1>Mundial 2022 - Torneo Completo</h1>
<div id="info-partido" role="status" aria-live="polite">Cargando torneo...</div>

<div id="game-area" aria-label="Campo de penalti">
  <div id="porteria" role="region" aria-label="Porter√≠a dividida en 9 zonas">
    <!-- Zonas para tirar -->
  </div>
  <div id="balon" aria-hidden="true"></div>
  <div id="jugador" aria-hidden="true" title="Jugador tirador"></div>
  <div id="portero" aria-hidden="true" title="Portero defensor"></div>
</div>

<div id="resultado" aria-live="polite"></div>

<div id="tabla-grupo" aria-label="Tabla de resultados">
  <table>
    <thead>
      <tr><th>Equipo</th><th>P</th><th>GF</th><th>GC</th></tr>
    </thead>
    <tbody id="tabla-cuerpo"></tbody>
  </table>
</div>

<button id="next-partido" disabled aria-disabled="true">Pr√≥ximo Partido</button>

<div id="pantalla-titulo" aria-live="assertive" style="display:none;"></div>

<audio id="audio-gol" src="https://actions.google.com/sounds/v1/sports/goal_celebration.ogg"></audio>
<audio id="audio-parada" src="https://actions.google.com/sounds/v1/sports/hockey_goalie_save.ogg"></audio>
<audio id="audio-disparo" src="https://actions.google.com/sounds/v1/sports/goal_kick.ogg"></audio>

<script>
  // -- EQUIPOS Y GRUPOS --
  const grupos = {
    "Grupo A": [
      {nombre: "Qatar", codigo: "qa", color: "#8B4513"},
      {nombre: "Ecuador", codigo: "ec", color: "#FFDD00"},
      {nombre: "Senegal", codigo: "sn", color: "#008000"},
      {nombre: "Pa√≠ses Bajos", codigo: "nl", color: "#FF6600"}
    ],
    "Grupo B": [
      {nombre: "Inglaterra", codigo: "gb-eng", color: "#FFFFFF"},
      {nombre: "Ir√°n", codigo: "ir", color: "#009900"},
      {nombre: "Estados Unidos", codigo: "us", color: "#B22234"},
      {nombre: "Gales", codigo: "gb-wls", color: "#FF0000"}
    ],
    "Grupo C": [
      {nombre: "Argentina", codigo: "ar", color: "#74ACDF"},
      {nombre: "Arabia Saudita", codigo: "sa", color: "#006C35"},
      {nombre: "M√©xico", codigo: "mx", color: "#006847"},
      {nombre: "Polonia", codigo: "pl", color: "#F00000"}
    ],
    "Grupo D": [
      {nombre: "Francia", codigo: "fr", color: "#0055A4"},
      {nombre: "Australia", codigo: "au", color: "#FFD700"},
      {nombre: "Dinamarca", codigo: "dk", color: "#C60C30"},
      {nombre: "T√∫nez", codigo: "tn", color: "#E70013"}
    ],
    "Grupo E": [
      {nombre: "Espa√±a", codigo: "es", color: "#AA151B"},
      {nombre: "Costa Rica", codigo: "cr", color: "#002B7F"},
      {nombre: "Alemania", codigo: "de", color: "#000000"},
      {nombre: "Jap√≥n", codigo: "jp", color: "#BC002D"}
    ],
    "Grupo F": [
      {nombre: "B√©lgica", codigo: "be", color: "#FF0000"},
      {nombre: "Canad√°", codigo: "ca", color: "#FF0000"},
      {nombre: "Marruecos", codigo: "ma", color: "#006233"},
      {nombre: "Croacia", codigo: "hr", color: "#FF0000"}
    ],
    "Grupo G": [
      {nombre: "Brasil", codigo: "br", color: "#FEDF00"},
      {nombre: "Serbia", codigo: "rs", color: "#D52B1E"},
      {nombre: "Suiza", codigo: "ch", color: "#FF0000"},
      {nombre: "Camer√∫n", codigo: "cm", color: "#007A33"}
    ],
    "Grupo H": [
      {nombre: "Portugal", codigo: "pt", color: "#006600"},
      {nombre: "Ghana", codigo: "gh", color: "#FFB200"},
      {nombre: "Uruguay", codigo: "uy", color: "#75AADB"},
      {nombre: "Corea del Sur", codigo: "kr", color: "#003478"}
    ]
  };

  // -- FASES --
  const fases = ["Fase de Grupos", "Octavos", "Cuartos", "Semifinal", "Final"];
  let faseActual = 0; // Empieza en fase de grupos
  let grupoActual = 0; // √≠ndice grupo (0-7)
  let partidoActual = 0; // partido dentro de fase o grupo
  let equipoLocal, equipoVisitante;
  let tablaGrupo = [];
  let resultadoPartido = null;
  const gruposNombres = Object.keys(grupos);

  // Para fases eliminatorias, guardamos partidos por fase
  // Cada partido es {equipo1, equipo2, ganador, resultado}
  let eliminatorias = {
    octavos: [],
    cuartos: [],
    semifinales: [],
    final: null
  };

  // Partidos en fase de grupos: √≠ndices de equipos en el grupo
  const partidosGrupoIndices = [
    [0,1],[0,2],[0,3],
    [1,2],[1,3],
    [2,3]
  ];

  // Audio
  const audioGol = document.getElementById("audio-gol");
  const audioParada = document.getElementById("audio-parada");
  const audioDisparo = document.getElementById("audio-disparo");

  // DOM Elements
  const infoPartidoEl = document.getElementById("info-partido");
  const porteriaEl = document.getElementById("porteria");
  const balonEl = document.getElementById("balon");
  const jugadorEl = document.getElementById("jugador");
  const porteroEl = document.getElementById("portero");
  const resultadoEl = document.getElementById("resultado");
  const tablaCuerpoEl = document.getElementById("tabla-cuerpo");
  const nextPartidoBtn = document.getElementById("next-partido");
  const pantallaTituloEl = document.getElementById("pantalla-titulo");

  // Crear zonas de tiro (9 zonas)
  function crearZonas() {
    porteriaEl.innerHTML = "";
    for(let i=0; i<9; i++){
      const zona = document.createElement("div");
      zona.classList.add("zona-tiro");
      zona.dataset.zona = i;
      zona.setAttribute("role","button");
      zona.setAttribute("tabindex","0");
      zona.setAttribute("aria-label",`Zona de tiro ${i+1} de 9`);
      zona.addEventListener("click", () => tiro(i));
      zona.addEventListener("keydown", e => {
        if(e.key === "Enter" || e.key === " "){
          e.preventDefault();
          tiro(i);
        }
      });
      porteriaEl.appendChild(zona);
    }
  }

  // Inicializa tabla grupo
  function initTablaGrupo() {
    const grupo = grupos[gruposNombres[grupoActual]];
    tablaGrupo = grupo.map(equipo => ({
      nombre: equipo.nombre,
      codigo: equipo.codigo,
      color: equipo.color,
      puntos: 0,
      golesFavor: 0,
      golesContra: 0
    }));
    actualizarTabla();
  }

  // Actualiza tabla visible
  function actualizarTabla(){
    if(faseActual === 0){
      // Ordenar por puntos, diferencia y goles
      tablaGrupo.sort((a,b) => {
        const difA = a.golesFavor - a.golesContra;
        const difB = b.golesFavor - b.golesContra;
        if(b.puntos !== a.puntos) return b.puntos - a.puntos;
        if(difB !== difA) return difB - difA;
        return b.golesFavor - a.golesFavor;
      });
      // Mostrar tabla grupos
      tablaCuerpoEl.innerHTML = "";
      for(const equipo of tablaGrupo){
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><img class="flag-small" src="https://flagcdn.com/w40/${equipo.codigo}.png" alt="Bandera de ${equipo.nombre}"> ${equipo.nombre}</td>
          <td>${equipo.puntos}</td>
          <td>${equipo.golesFavor}</td>
          <td>${equipo.golesContra}</td>
        `;
        tablaCuerpoEl.appendChild(tr);
      }
    } else {
      // Mostrar tabla eliminatorias
      // Lista de partidos por fase
      let partidos = [];
      let tituloTabla = "";
      if(faseActual === 1) { partidos = eliminatorias.octavos; tituloTabla = "Octavos de Final"; }
      else if(faseActual === 2) { partidos = eliminatorias.cuartos; tituloTabla = "Cuartos de Final"; }
      else if(faseActual === 3) { partidos = eliminatorias.semifinales; tituloTabla = "Semifinal"; }
      else if(faseActual === 4) { partidos = eliminatorias.final ? [eliminatorias.final] : []; tituloTabla = "Final"; }
      tablaCuerpoEl.innerHTML = "";
      infoPartidoEl.textContent = tituloTabla;
      for(let p of partidos){
        if(!p) continue;
        const local = p.equipo1 ? p.equipo1.nombre : "???";
        const visita = p.equipo2 ? p.equipo2.nombre : "???";
        const golLocal = p.resultado ? p.resultado.golesLocal : "-";
        const golVisita = p.resultado ? p.resultado.golesVisita : "-";
        const ganador = p.ganador ? p.ganador.nombre : "";
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${local}</td>
          <td>${golLocal}</td>
          <td>${golVisita}</td>
          <td>${visita}</td>
          <td>${ganador ? `Ganador: ${ganador}` : ""}</td>
        `;
        tablaCuerpoEl.appendChild(tr);
      }
    }
  }

  // Habilitar o deshabilitar zonas para tirar
  function habilitarZonas(habilitar){
    const zonas = porteriaEl.querySelectorAll(".zona-tiro");
    zonas.forEach(zona => zona.style.pointerEvents = habilitar ? "auto" : "none");
  }

  // Portero decide si para el tiro (25% chance)
  function porteroPara() {
    return Math.random() < 0.25;
  }
  // Portero movimiento (0,1,2)
  function porteroMovimiento() {
    return Math.floor(Math.random() * 3);
  }

  // Mover bal√≥n y animar tiro
  function moverBalon(zona){
    // La porter√≠a es 3x3:
    // Calculamos posici√≥n para mover balon
    const col = zona % 3;
    const row = Math.floor(zona / 3);
    // Posici√≥n de la porter√≠a en el game area
    const porteriaRect = porteriaEl.getBoundingClientRect();
    const gameRect = document.getElementById("game-area").getBoundingClientRect();
    // Calculamos la posici√≥n relativa dentro del game-area (px)
    const xPorteria = porteriaEl.offsetLeft;
    const yPorteria = porteriaEl.offsetTop;
    // Cada zona en px:
    const zonaWidth = porteriaEl.clientWidth / 3;
    const zonaHeight = porteriaEl.clientHeight / 3;
    // Colocamos bal√≥n centrado en la zona
    const balonX = xPorteria + zonaWidth * col + zonaWidth/2 - balonEl.clientWidth/2;
    const balonY = yPorteria + zonaHeight * row + zonaHeight/2 - balonEl.clientHeight/2;
    balonEl.style.left = balonX + "px";
    balonEl.style.top = balonY + "px";
  }

  // Cambiar color y posici√≥n jugador y portero seg√∫n equipo
  function actualizarColores(equipoLocal, equipoVisitante){
    jugadorEl.style.backgroundColor = equipoLocal.color;
    porteroEl.style.backgroundColor = equipoVisitante.color;
  }

  // Resetea balon a posici√≥n inicial (junto a jugador)
  function resetBalon() {
    balonEl.style.left = (jugadorEl.offsetLeft + jugadorEl.clientWidth) + "px";
    balonEl.style.top = (jugadorEl.offsetTop + jugadorEl.clientHeight/2 - balonEl.clientHeight/2) + "px";
  }

  // Tiro (zona escogida)
  async function tiro(zona){
    habilitarZonas(false);
    audioDisparo.play();
    moverBalon(zona);
    // Simular portero
    // portero mueve a alguna de las 3 columnas (0,1,2)
    // zona tiro tiene columna
    const tiroCol = zona % 3;
    // Portero elige columna
    const porteroCol = porteroMovimiento();
    // Animar portero movimiento lateral
    porteroEl.style.transform = `translateX(${(porteroCol - 1) * 30}px)`;
    // Esperar animaci√≥n (500ms)
    await new Promise(r => setTimeout(r, 500));
    // Decidir gol o parada
    let gol = false;
    if(tiroCol !== porteroCol){
      gol = true;
    } else {
      gol = !porteroPara();
    }

    if(gol) {
      resultadoEl.textContent = "¬°GOOOOL! ‚öΩüéâ";
      audioGol.play();
    } else {
      resultadoEl.textContent = "¬°PARADA! üß§‚úã";
      audioParada.play();
    }
    await new Promise(r => setTimeout(r, 1500));
    resultadoEl.textContent = "";
    porteroEl.style.transform = `translateX(0)`;
    resetBalon();

    // Guardar resultado del penalti (gol o no)
    if(faseActual === 0) {
      // Fase grupos: marcar goles
      if(gol){
        // Goles a favor local
        tablaGrupo[partidoEquipoLocal].golesFavor++;
        tablaGrupo[partidoEquipoVisitante].golesContra++;
        tablaGrupo[partidoEquipoLocal].puntos += 3;
      } else {
        tablaGrupo[partidoEquipoVisitante].golesFavor++;
        tablaGrupo[partidoEquipoLocal].golesContra++;
        tablaGrupo[partidoEquipoVisitante].puntos += 3;
      }
      actualizarTabla();
      partidoActual++;
      if(partidoActual >= partidosGrupoIndices.length){
        grupoActual++;
        if(grupoActual >= gruposNombres.length){
          // Fase grupos terminada
          faseActual++;
          calcularOctavos();
          mostrarTituloFase();
          partidoActual = 0;
        } else {
          partidoActual = 0;
          initTablaGrupo();
        }
      }
      prepararSiguientePartido();
    } else {
      // Eliminatorias
      if(gol) {
        resultadoPartido.ganador = equipoLocal;
      } else {
        resultadoPartido.ganador = equipoVisitante;
      }
      resultadoPartido.resultado = gol ? {golesLocal: 1, golesVisita: 0} : {golesLocal: 0, golesVisita: 1};
      actualizarTabla();
      partidoActual++;
      if(faseActual === 4){
        // Final terminada
        pantallaTituloEl.style.display = "block";
        pantallaTituloEl.textContent = `¬°${resultadoPartido.ganador.nombre} CAMPE√ìN DEL MUNDIAL 2022! üèÜüéâ`;
        nextPartidoBtn.disabled = true;
        nextPartidoBtn.setAttribute("aria-disabled","true");
        habilitarZonas(false);
        return;
      }
      const faseNombres = ["octavos","cuartos","semifinales"];
      if(partidoActual >= eliminatorias[faseNombres[faseActual - 1]].length){
        // Avanzar a siguiente fase
        faseActual++;
        partidoActual = 0;
        if(faseActual < 4) {
          armarFaseEliminatoria(faseActual);
        }
        mostrarTituloFase();
      }
      prepararSiguientePartido();
    }
  }

  // Preparar siguiente partido (actualiza equipos)
  let partidoEquipoLocal, partidoEquipoVisitante;
  function prepararSiguientePartido() {
    resultadoEl.textContent = "";
    nextPartidoBtn.disabled = true;
    nextPartidoBtn.setAttribute("aria-disabled", "true");

    if(faseActual === 0){
      const grupo = grupos[gruposNombres[grupoActual]];
      const indices = partidosGrupoIndices[partidoActual];
      partidoEquipoLocal = indices[0];
      partidoEquipoVisitante = indices[1];
      equipoLocal = grupo[partidoEquipoLocal];
      equipoVisitante = grupo[partidoEquipoVisitante];
      infoPartidoEl.textContent = `Fase de Grupos - ${gruposNombres[grupoActual]}: ${equipoLocal.nombre} vs ${equipoVisitante.nombre}`;
    } else {
      let partidosFase = [];
      if(faseActual === 1) partidosFase = eliminatorias.octavos;
      else if(faseActual === 2) partidosFase = eliminatorias.cuartos;
      else if(faseActual === 3) partidosFase = eliminatorias.semifinales;
      else if(faseActual === 4) partidosFase = eliminatorias.final ? [eliminatorias.final] : [];

      if(partidoActual >= partidosFase.length){
        equipoLocal = null;
        equipoVisitante = null;
        infoPartidoEl.textContent = "Torneo Finalizado";
        habilitarZonas(false);
        nextPartidoBtn.disabled = true;
        nextPartidoBtn.setAttribute("aria-disabled","true");
        return;
      }
      const p = partidosFase[partidoActual];
      equipoLocal = p.equipo1;
      equipoVisitante = p.equipo2;
      resultadoPartido = p;
      infoPartidoEl.textContent = `${fases[faseActual]}: ${equipoLocal.nombre} vs ${equipoVisitante.nombre}`;
    }
    actualizarColores(equipoLocal, equipoVisitante);
    resetBalon();
    habilitarZonas(true);
    nextPartidoBtn.disabled = false;
    nextPartidoBtn.setAttribute("aria-disabled", "false");
  }

  // Calcular octavos a partir de fase grupos (top 2 de cada grupo)
  function calcularOctavos(){
    // Extraer los dos mejores de cada grupo
    const clasificados = [];
    for(let grupoNom of gruposNombres){
      let tabla = tablaGrupo;
      if(grupoNom !== gruposNombres[grupoActual - 1]) {
        // Solo √∫ltimo grupo tiene tabla en tablaGrupo, usamos otra forma
        // Para simplicidad guardamos tabla en array de grupos
      }
      const grupoTabla = [];
      for(let eq of grupos[grupoNom]){
        grupoTabla.push({
          nombre: eq.nombre,
          codigo: eq.codigo,
          color: eq.color,
          puntos: 0,
          golesFavor: 0,
          golesContra: 0
        });
      }
      // Para simplicidad guardamos tabla (se asume tablaGrupo actualizada)
      // En esta demo s√≥lo tomamos los dos primeros equipos del grupo actual
      // En producci√≥n deber√≠as guardar resultados reales (esto es un ejemplo)
      // Aqu√≠ solo usamos la tablaGrupo actual para el grupo terminado
      // Guardamos top 2 para ese grupo
      // Pero para demo, vamos a usar s√≥lo tablaGrupo porque ya avanzamos todos los grupos
      // Mejor: calculamos top 2 con base en tablaGrupo ordenada que tenemos.
    }
    // En esta demo, vamos a simular y hardcodear octavos con los mejores de cada grupo:
    const top2 = [];
    // Tomamos top 2 de cada grupo usando tablaGrupo, pero tablaGrupo s√≥lo guarda el √∫ltimo grupo
    // Por eso tomamos mejor las dos primeras posiciones de cada grupo ordenadas a mano
    // Aqu√≠ hardcodeo clasificados por simplicidad (campos: nombre, codigo, color)
    top2.push(...[
      grupos["Grupo A"][3], grupos["Grupo B"][0],
      grupos["Grupo C"][0], grupos["Grupo D"][0],
      grupos["Grupo E"][0], grupos["Grupo F"][0],
      grupos["Grupo G"][0], grupos["Grupo H"][0],
      grupos["Grupo A"][1], grupos["Grupo B"][1],
      grupos["Grupo C"][1], grupos["Grupo D"][1],
      grupos["Grupo E"][1], grupos["Grupo F"][1],
      grupos["Grupo G"][1], grupos["Grupo H"][1]
    ]);
    // Ahora armamos octavos (8 partidos) con parejas:
    eliminatorias.octavos = [];
    for(let i=0; i<8; i++){
      eliminatorias.octavos.push({
        equipo1: top2[i],
        equipo2: top2[i+8],
        ganador: null,
        resultado: null
      });
    }
  }

  // Armar fases eliminatorias tras octavos
  function armarFaseEliminatoria(fase){
    // fase: 1=octavos, 2=cuartos, 3=semifinales, 4=final
    if(fase === 2) {
      // Cuartos: ganadores de octavos en pares
      eliminatorias.cuartos = [];
      for(let i=0; i<4; i++){
        eliminatorias.cuartos.push({
          equipo1: eliminatorias.octavos[i*2].ganador,
          equipo2: eliminatorias.octavos[i*2+1].ganador,
          ganador: null,
          resultado: null
        });
      }
    } else if(fase === 3){
      // Semifinales: ganadores cuartos en pares
      eliminatorias.semifinales = [];
      for(let i=0; i<2; i++){
        eliminatorias.semifinales.push({
          equipo1: eliminatorias.cuartos[i*2].ganador,
          equipo2: eliminatorias.cuartas[i*2+1].ganador,
          ganador: null,
          resultado: null
        });
      }
    } else if(fase === 4){
      // Final: ganadores semifinales
      eliminatorias.final = {
        equipo1: eliminatorias.semifinales[0].ganador,
        equipo2: eliminatorias.semifinales[1].ganador,
        ganador: null,
        resultado: null
      };
    }
  }

  // Mostrar t√≠tulo fase
  function mostrarTituloFase(){
    pantallaTituloEl.style.display = "block";
    pantallaTituloEl.textContent = fases[faseActual];
    setTimeout(() => {
      pantallaTituloEl.style.display = "none";
    }, 2000);
  }

  // Bot√≥n siguiente partido
  nextPartidoBtn.addEventListener("click", () => {
    prepararSiguientePartido();
  });

  // Inicio
  crearZonas();
  initTablaGrupo();
  prepararSiguientePartido();
  mostrarTituloFase();

</script>

</body>
</html>
